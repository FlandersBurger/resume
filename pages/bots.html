<div id="bots-page" class="col-md-12" ng-keydown="keyDown($event)">
  <h1 class="text-danger" ng-show="!loggedIn">You have to be logged in to edit lists</h1>
  <div ng-show="loggedIn">
    <div class="well well-sm">
      This page works in conjunction with the <a href="https://t.me/joinchat/I1Di-1MXGXkjhgNPXi6Vfg" target="_blank">Ten Things Telegram Bot</a>
    </div>
    <div class="col-md-4">
      <div class="btn-group">
        <div class="btn-group" ng-if="userCount > 1">
          <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">{{userFilter ? userFilter : 'User'}}</button>
            <ul class="dropdown-menu">
              <li ng-repeat="(key, value) in userFilters" ng-show="currentUser.admin || key === currentUser.username || key === 'All'"><a href="#" ng-click="setUserFilter(key)">{{key}} ({{value}})</a></li>
            </ul>
          </div>
        </div>
        <div class="btn-group">
          <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">{{categoryFilter ? categoryFilter : 'Category'}} ({{filteredLists().length}})</button>
            <ul class="dropdown-menu">
              <li ng-repeat="category in categoryFilters | orderBy"><a href="#" ng-click="setCategoryFilter(category)">{{category}} ({{getCategoryCount(category)}})</a></li>
            </ul>
          </div>
        </div>
        <div class="btn-group">
          <div class="dropdown">
            <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Order by {{sortValue}} {{(sortDirection ? 'descending' : 'ascending')}}</button>
            <ul class="dropdown-menu">
              <li><a href="#" ng-click="sort('name')">Name {{sortValue === 'name' ? (sortDirection ? 'Descending' : 'Ascending') : 'Ascending'}}</a></li>
              <li><a href="#" ng-click="sort('date')">Date {{sortValue === 'date' ? (sortDirection ? 'Descending' : 'Ascending') : 'Ascending'}}</a></li>
              <li><a href="#" ng-click="sort('skips')">Skips {{sortValue === 'skips' ? (sortDirection ? 'Descending' : 'Ascending') : 'Ascending'}}</a></li>
              <li><a href="#" ng-click="sort('plays')">Plays {{sortValue === 'plays' ? (sortDirection ? 'Descending' : 'Ascending') : 'Ascending'}}</a></li>
              <li><a href="#" ng-click="sort('score')">Score {{sortValue === 'score' ? (sortDirection ? 'Descending' : 'Ascending') : 'Ascending'}}</a></li>
              <li><a href="#" ng-click="sort('values.length')">Values {{sortValue === 'values.length' ? (sortDirection ? 'Descending' : 'Ascending') : 'Ascending'}}</a></li>
            </ul>
          </div>
        </div>
      </div>
      <input class="form-control" ng-model="search" placeholder="Search"/>
      <button class="btn btn-sm" ng-class="listButtonClass(list)" ng-repeat="list in filteredLists() | filter: search | orderBy: sorter | limitTo: 100" ng-click="selectList(list)">{{list.name}} ({{list.values.length}})</button>
    </div>
    <div class="col-md-8">
      <div class="col-md-12">
        <div class="btn btn-default" ng-click="addList()">
          <i class="fa fa-file-o" aria-hidden="true"></i> New
        </div>
        <div class="btn btn-default" ng-click="saveList(selectedList)" ng-disabled="!selectedList">
          <i class="fa fa-save" ng-class="{ 'fa-save': !saving, 'fa-spin fa-spinner': saving }" aria-hidden="true"></i> Save
        </div>
        <div class="btn btn-danger" ng-click="deleteList(selectedList)" ng-disabled="!selectedList || (!currentUser.admin && selectedList.creator._id !== currentUser._id)">
          <i class="fa fa-trash-o" aria-hidden="true"></i> Delete
        </div>
        <div class="btn btn-default" ng-click="reportList(selectedList)" ng-hide="!selectedList || selectedList.creator._id === currentUser._id">
          <i class="fa fa-bug" aria-hidden="true"></i> Report
        </div>
      </div>
      <div class="col-md-12">
        <div class="input-group">
          <input class="form-control" ng-model="selectedList.name" placeholder="List Name" ng-disabled="!selectedList || (!currentUser.admin && selectedList.creator._id !== currentUser._id)" />
          <div class="input-group-btn">
            <div class="dropdown">
              <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" ng-disabled="!selectedList || (!currentUser.admin && selectedList.creator._id !== currentUser._id)">{{selectedList.category ? selectedList.category : 'Category'}}</button>
              <ul class="dropdown-menu">
                <li ng-repeat="category in categories | orderBy"><a href="#" ng-click="selectedList.category = category">{{category}}</a></li>
              </ul>
            </div>
          </div>
          <input class="form-control" ng-model="selectedList.description" placeholder="List Description" ng-disabled="!selectedList || (!currentUser.admin && selectedList.creator._id !== currentUser._id)" />
        </div>
        <h5 ng-show="selectedList.creator">By {{selectedList.creator.username}} on {{formatDate(selectedList.date)}} --- <span ng-show="selectedList.plays">Plays: {{selectedList.plays}} / Skips: {{selectedList.skips}} / Score: {{selectedList.score}}</span></h5>
        <div>

          <!--div class="btn btn-default" ng-click="selectedList.values.unshift({ value: '', blurb: '' })" ng-disabled="!selectedList">
            <i class="fa fa-plus" aria-hidden="true"></i> Add Value
          </div-->
        </div>
        <div class="input-group">
          <input id="new-value" class="form-control" ng-model="newItem.value" ng-disabled="!selectedList" placeholder="Value {{selectedList.values.length + 1}}" />
          <input id="new-blurb" class="form-control" ng-model="newItem.blurb" ng-disabled="!selectedList" placeholder="Display after guessing {{newItem.value}}" />
          <div class="input-group-btn">
            <button class="btn" ng-click="addValue()" ng-disabled="!selectedList">Add</button>
          </div>
        </div>
        <hr />
        <div class="input-group" ng-repeat="item in selectedList.values | orderBy: 'value'">
          <input id="value{{$index}}" class="form-control" ng-model="item.value" placeholder="Value {{selectedList.values.length - $index}}" ng-disabled="!currentUser.admin && selectedList.creator._id !== currentUser._id && item.creator !== currentUser._id" />
          <span class="input-group-addon"></span>
          <input class="form-control" ng-model="item.blurb" placeholder="Display after guessing {{item.value}}" ng-disabled="!currentUser.admin && selectedList.creator._id !== currentUser._id && item.creator !== currentUser._id" />
        </div>
      </div>
    </div>
    <!--div class="col-md-4" ng-repeat="list in lists">
      <div class="panel" ng-class="{'panel-info': !list._id, 'panel-default': list._id}">
        <div class="panel-heading">
          <input class="form-control" ng-model="list.name" placeholder="Name of the list" />
          <h5>By {{list.creator.username}}</h5>
        </div>
        <div class="panel-body">
          <div ng-repeat="value in list.values track by $index">
            <input class="form-control" ng-model="value.value" placeholder="Value {{$index + 1}}" />
          </div>
        </div>
        <div class="panel-footer">
          <div class="btn btn-default" ng-click="saveList(list)">
            <i class="fa fa-save" aria-hidden="true"></i> Save
          </div>
          <div class="btn btn-default" ng-click="deleteList(list)">
            <i class="fa fa-trash-o" aria-hidden="true"></i> Delete
          </div>
        </div>
      </div>
    </div-->
  </div>
</div>
